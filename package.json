{
  "name": "root",
  "private": true,  "scripts": {
    "lerna": "lerna",
    "--d0a2db81-aa89-430c-9694-5d54820f926f": "",
    "package": "lerna run package --stream",
    "package:ui": "lerna run package:ui --stream",
    "package:bot": "lerna run package:bot --stream",
    "package:start": "lerna run package:start --stream",
    "package:ui:start": "lerna run package:ui:start --stream",
    "package:bot:start": "lerna run package:bot:start --stream",
    "--42a89a88-42cc-4ade-a675-dc5baefb1bd3": "",
    "watch": "lerna run watch --stream",
    "watch:ui": "lerna run watch:ui --stream",
    "watch:lang": "lerna run watch:lang --stream",
    "watch:bot": "lerna run watch:bot --stream",
    "--c1c80481-1918-4a53-beec-1619b0a36810": "",
    "start": "lerna run start --stream",
    "start:ui": "lerna run start:ui --stream",
    "start:bot": "lerna run start:bot --stream",
    "--95e81db7-173b-47b5-b6e3-7b8aa2087ea0": "",
    "dev": "lerna run dev --stream",
    "dev:ui": "lerna run dev:ui --stream",
    "dev:bot": "lerna run dev:bot --stream",
    "dev:common": "lerna run dev:common --stream",
    "--7472ab55-f1fa-428a-9a63-961b0149e08c": "",
    "build": "lerna run build --stream",
    "build:ui": "lerna run build:ui --stream",
    "build:bot": "lerna run build:bot --stream",
    "build:common": "lerna run build:common --stream",
    "build:lang": "lerna run build:lang --stream",
    "--24485967-906d-4e89-8313-e2a34a03d028": "",
    "bootstrap": "lerna bootstrap",
    "--2c4192c4-194b-4f3a-9774-db13f69120e6": "",
    "publish:info": "lerna ls -l",
    "publish:major": "lerna version major --no-push -y && lerna publish from-package -y",
    "publish:minor": "lerna version minor --no-push -y && lerna publish from-package -y",
    "publish:patch": "lerna version patch --no-push -y && lerna publish from-package -y",
    "publish:prepatch": "lerna version prepatch --no-push -y && lerna publish from-package -y",
    "--e3e4b78c-6f62-4372-9f3f-47f5f2203c05": "",
    "infra:get:recent": "kubectl get pods --sort-by=.status.startTime",
    "infra:prom2:forward": "kubectl port-forward svc/prometheus 9090 -n kube-system",
    "infra:prom:forward": "kubectl port-forward svc/kube-prometheus-stack-prometheus 9090 -n monitoring",
    "infra:grafana": "yarn run infra:grafana:forward && yarn run infra:grafana:open",
    "infra:grafana:open": "start http://localhost:8080",
    "infra:alert:forward": "kubectl port-forward svc/kube-prometheus-stack-alertmanager -n monitoring 9093",
    "infra:alert:send": "curl -H 'Content-Type: application/json' -d '[{\"labels\":{\"alertname\":\"myalert\"}}]' http://127.0.0.1:9093/api/v1/alerts",
    "infra:grafana:forward": "kubectl port-forward svc/kube-prometheus-stack-grafana 8080:80 -n monitoring",
    "infra:update-credentials": "doctl kubernetes cluster kubeconfig save rollem-sfo2",
    "infra:update-credentials:old": "doctl kubernetes cluster kubeconfig save rollem-old-sfo2",
    "--93cac170-25d7-48f5-a4da-d98771fdfcc4": "",
    "infra:restart:prod": "sh -c 'kubectl rollout restart deployment rollem-prod-${0}-deployment'",
    "infra:restart:next": "sh -c 'kubectl rollout restart deployment rollem-next-${0}-deployment'",
    "infra:replace:next:old": "kubectl replace -f ./infra/k8s/rollem-next/",
    "infra:replace:prod:old": "kubectl replace -f ./infra/k8s/rollem-prod/",
    "infra:replace:ui:old": "kubectl replace -f ./infra/k8s/rollem-ui/",
    "infra:replace:services:old": "kubectl apply -f ./infra/k8s/services/",
    "infra:replace:ingress:old": "kubectl replace -f ./infra/k8s/ingress/",
    "--316f3db2-2560-43b4-b107-6a293fa48706": "",
    "infra:apply:cluster-config": "kubectl apply -f ./infra/k8s/cluster-config/",
    "infra:apply:next": "kubectl apply -f ./infra/k8s/rollem-next/",
    "infra:apply:prod": "kubectl apply -f ./infra/k8s/rollem-prod/",
    "infra:helm:apply:rules": "kubectl apply -f ./infra/k8s/helm/monitoring/prometheus-rules/",
    "infra:apply:masto": "kubectl apply -f ./infra/k8s/rollem-mastodon/",
    "infra:apply:ui": "kubectl apply -f ./infra/k8s/rollem-ui/",
    "infra:apply:services": "kubectl apply -f ./infra/k8s/services/",
    "infra:apply:ingress": "kubectl apply -f ./infra/k8s/ingress/",
    "--c6704d4b-54da-47b8-8921-75691d71b371": "",
    "infra:debug:busybox": "kubectl run -it --rm --restart=Never busybox --image=gcr.io/google-containers/busybox sh",
    "--f0e6974b-4bac-4f65-a90c-3807af983c46": "",
    "infra:delete:evicted": "kubectl get pods | grep Evicted | awk '{print $1}' | xargs kubectl delete pod",
    "infra:delete:error": "kubectl get pods | grep Error | awk '{print $1}' | xargs kubectl delete pod",
    "infra:delete:unknown": "kubectl get pods | grep ContainerStatusUnknown | awk '{print $1}' | xargs kubectl delete pod",
    "infra:delete:creating": "kubectl get pods | grep ContainerCreating | awk '{print $1}' | xargs kubectl delete pod",
    "infra:delete:bad": "kubectl get pods | grep -e Evicted -e Error -e ContainerStatusUnknown -e OOMKilled -e ImagePullBackOff | awk '{print $1}' | xargs kubectl delete pod",
    "--bf2d898c-2311-41e1-a7fd-4c7419ac04eb": "",
    "infra:prom:restart:old": "kubectl rollout restart deployment kube-prometheus-stack-operator -n monitoring",
    "infra:grafana:restart": "kubectl rollout restart statefulset kube-prometheus-stack-grafana -n monitoring",
    "--cdcbcab1-c614-42b4-8a84-7406e6206c35": "",
    "infra:alert:restart": "kubectl rollout restart statefulset alertmanager-kube-prometheus-stack-alertmanager -n monitoring",
    "--a7c75bcd-4b27-48ac-aec1-ec709b501a18": "",
    "infra:delete:bad:monitoring": "kubectl get pods -n monitoring | grep -e Evicted -e Error -e ContainerStatusUnknown -e OOMKilled -e ImagePullBackOff -e Completed | awk '{print $1}' | xargs kubectl delete pod -n monitoring",
    "infra:delete:bad:all": "kubectl get pods -A | grep -e Evicted -e Error | awk '{print $1,$2,$4}' | xargs kubectl delete pod $2 -n $1",
    "--cbc4eb30-880e-481f-b2e0-0fe4ee7d8e23": "",
    "infra:helm:apply:volumes": "kubectl apply -f ./infra/k8s/helm/volumes/",
    "infra:helm:upgrade:monitoring": "helm upgrade kube-prometheus-stack prometheus-community/kube-prometheus-stack -n monitoring -f ./infra/k8s/helm/monitoring/kube-prometheus-stack/values.yaml -f ./infra/k8s/helm/monitoring/kube-prometheus-stack/grafana.yaml -f ./infra/k8s/helm/monitoring/kube-prometheus-stack/alert-manager.yaml -f ./infra/k8s/helm/monitoring/kube-prometheus-stack/scrapers.yaml -f ./infra/k8s/helm/monitoring/kube-prometheus-stack/thanos.yaml -f ./infra/k8s/helm/monitoring/kube-prometheus-stack/prometheus.yaml -f ./infra/k8s/helm/monitoring/kube-prometheus-stack/node-exporter.yaml -f ./infra/k8s/helm/monitoring/kube-prometheus-stack/kube-state-metrics.yaml -f ./infra/k8s/helm/monitoring/kube-prometheus-stack/prometheus-operator.yaml -f ./infra/k8s/helm/monitoring/kube-prometheus-stack/secrets.yaml --timeout 10m",
    "infra:helm:upgrade:descheduler": "helm upgrade descheduler descheduler/descheduler -n monitoring -f ./infra/k8s/helm/monitoring/descheduler.yaml",
    "--e81b7699-9c15-471c-bfd5-b7d75bfcdf0c": "",
    "infra:prom:bash": "kubectl exec -it -n monitoring prometheus-kube-prometheus-stack-prometheus-0 -c prometheus -- sh",
    "infra:prom:purge-wal": "kubectl exec -it -n monitoring prometheus-kube-prometheus-stack-prometheus-0 -c prometheus -- mv wal wal-removed",
    "infra:prom:restart": "sh -c 'kubectl rollout restart statefulset prometheus-kube-prometheus-stack-prometheus -n monitoring'",
    "postpublish": "git push --tags"
  },
  "dependencies": {
    "lerna": "^4.0.0"
  },
  "packageManager": "yarn@4.4.1"
}
